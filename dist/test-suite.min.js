"use strict";!function(t,e){var n={printError:!0,printLog:!0,attachErrorOnBody:!0,onAsyncTerminate:function(){},onSuiteTerminate:function(){}};function s(t,n){!e&&console.log(n||"",t,"[0m"),e&&console.log("%c"+t,n?"color:"+n:"")}function o(t){var o=this;o.options=Object.assign(n,t||{}),o.log=o.options.printLog?s:function(){},o.tests=[],o.html="",o.__testcase=null,o.__testsuite=null,o.asyncTests={pendingTests:[],add:function(t,e){var n={testcase:t,suite:e};return this.pendingTests.push(n)},remove:function(t){this.pendingTests=this.pendingTests.filter(function(e){return e.testcase!==t}),this.pendingTests.length||o.options.onAsyncTerminate(o)}},e&&function(t){if(window)window.addEventListener("error",function(e){var n="Message: "+e.message,s="\nFilename: "+e.filename,o="\n Position -> line: "+e.lineno+", col: "+e.colno,r="\n Error: "+e.error;console.error("[testSuite.js logging window errors]",n,s,o,r),t&&(document.body.innerHTML+="<h1 style='width:100%!important;display:block!important;opacity:1!important;color:red!important;text-shadow: 1px 1px 1em black!important;font-size:24px!important;position:static!important;float:left!important;transform:none!important;text-indent:0!important'>[testSuite.js error monitoring]\n"+n+s+o+r+"</h1>")});else{var e=require("events"),n=new e;n.on("error",function(t){console.error("[testSuite.js error monitoring]\n",JSON.stringify(t))})}}(o.options.printLog)}!function(t){function e(t,e){return this.el=t,this.negation=!1,this.options=e||{},this}function n(t){return this.negation&&(t=!t),this.options.cb&&this.options.cb(t),t}e.prototype.not=function(){return this.negation=!this.negation,this},e.prototype.toBe=function(t){var e=this.el===t;return n.call(this,e)},e.prototype.toBeUndefined=function(){var t=void 0===this.el;return n.call(this,t)},e.prototype.toBeNull=function(){var t=null===this.el;return n.call(this,t)},e.prototype.toBeBoolean=function(){var t="boolean"==typeof this.el;return n.call(this,t)},e.prototype.toBeNumber=function(){var t="number"==typeof this.el;return n.call(this,t)},e.prototype.toBeString=function(){var t="string"==typeof this.el;return n.call(this,t)},e.prototype.toBeObject=function(){var t="object"==typeof this.el;return n.call(this,t)},e.prototype.toBeArray=function(){var t=Array.isArray(this.el);return n.call(this,t)},e.prototype.toBeDate=function(){var t="[object Date]"===Object.prototype.toString.call(this.el);return n.call(this,t)},e.prototype.toBeInView=function(t,e,s){if(e=e||1,s=s||1,!this.el instanceof Element)throw new Error("toBeInView called without HTMLElement, or wrong type");var o,r=this.el.getBoundingClientRect(),i=document.documentElement.clientWidth,a=document.documentElement.clientHeight;return((o=t?!(0==r.top&&0==r.bottom&&0==r.left&&0==r.right)&&(r.top>=0&&r.top<a||r.bottom<a&&r.bottom>=0)&&(r.left>=0&&r.left<i||r.right<i&&r.right>=0):!(0==r.top&&0==r.bottom&&0==r.left&&0==r.right)&&r.top>=0&&r.left>=0&&r.bottom<=document.documentElement.clientHeight&&r.right<=document.documentElement.clientWidth)&&r.width<e||r.height<s)&&(o=!1),n.call(this,o)},e.prototype.toBeCloseTo=function(t,e){e=e||1;var s=!isNaN(t)&&(this.el+e>=t&&this.el<=t||this.el-e<=t&&this.el>=t);return n.call(this,s)},e.prototype.toBeGreaterThan=function(t){var e=this.el>t;return n.call(this,e)},e.prototype.toBeGreaterThanOrEqual=function(t){var e=this.el>=t;return n.call(this,e)},e.prototype.toBeLessThan=function(t){var e=this.el<t;return n.call(this,e)},e.prototype.toBeLessThanOrEqual=function(t){var e=this.el<=t;return n.call(this,e)},t.expect=function(t,n){return new e(t,n)}}("undefined"!=typeof window?window:module.exports),Object.defineProperty(o.prototype,"getTotalResult",{get:function(){var t=this.tests,e={total:0,passed:0,failed:0,pendings:this.asyncTests.pendingTests.length};return t.forEach(function(t){return t.testCases.forEach(function(t){Array.isArray(t.value)?t.value.forEach(function(t,n){e.total++,t?e.passed++:e.failed++}):(isNaN(t.value)?e.failed++:e.passed++,e.total++)})}),e}}),o.prototype.createSuite=function(t,e){var n=this,s=n.tests.push({label:t,testCases:[],type:"general"});n.log("[testSuite.js creating general suite] "+t),e(),n.asyncTests.pendingTests.filter(function(t){return t.suite===n.tests[s-1]}).length?n.log("[testSuite.js general suite] suite called \n"+t+" \nhave asynchronous test cases"):n.options.onSuiteTerminate(n.tests[s-1])},o.prototype.createTestCase=function(t,e){var n=this,s=n.tests[n.tests.length-1];if(!s||"general"!=s.type)throw new Error("testSuite().createTestCase called without browserTestSuite.testSuite defined. Declaring testSuite is expected, defining a testCase in suitePerformance is not possible");var o=s.testCases.push({label:t,value:[]});n.__testcase=s.testCases[o-1];var r=n.__testcase.value.length;e(function(t){n.__testcase=s.testCases[o-1],n.__testsuite=s,t()}),n.__testcase.value.length==r&&n.asyncTests.add(n.__testcase,s)},o.prototype.expect=function(n){var s=this,o=s.tests[s.tests.length-1];if(void 0===o)throw new Error("testSuite().expect called without testSuite defined. Declaring general testSuite is expected");var r=o.testCases[o.testCases.length-1];if(void 0===r)throw new Error("testSuite().expect called without testCase defined. Declaring general testSuite is expected");var i={cb:function(t){o=s.__testsuite,(r=s.__testcase).value.push(t),s.log("[testSuite.js creating testcase] "+r.label);var n=e?"green":"[32m ";t||(n=e?"red":"[31m "),s.log("[testSuite.js"+r.label+" #"+(r.value.length-1)+"] = "+t,n),s.asyncTests.pendingTests.filter(function(t){return t.testcase===r}).length&&(s.asyncTests.remove(r),!s.asyncTests.pendingTests.filter(function(t){return t.suite===o}).length&&s.options.onSuiteTerminate(o))}};return t.expect(n,i)},o.prototype.drawing=function(){var t,e='<table class="testSuite-suite" width="100%"><tbody>',n=this.tests,s=n.length;for(t=0;t<s;t++){e+='<tr><th colspan="2"><h1>'+n[t].label+"</h1></th></tr>";var o,r=n[t],i=r.testCases,a=i.length,l="";for(o=0;o<a;o++){var u,c=i[o],p=c.value;if(Array.isArray(p)||"perf"!=r.type){var h=p.length;for(u=0;u<h;u++)e+='<tr style="color:white;text-align:center;background-color:'+(p[u]?"green":"red")+'">',l=p.length>1?" #"+u:"",e+='<td style="width:50%"><h3 style="padding:0 10px">'+i[o].label+l+"</h3></td><td><h4>"+p[u]+"</h4></td>",e+="</tr>"}else e+='<tr style="color:white;text-align:center;background-color:'+(r.faster==o?"green":"red")+'">',e+='<td style="width:50%"><h3 style="padding:0 10px">'+c.label+"</h3></td><td><h4>"+p+"</h4></td>",e+="</tr>"}}return e+="</tbody></table>",this.html=e,this},o.prototype.showHtmlInPopUp=function(){var t=this;return t.testWindowPopup=window.open("","_blank","scrollbars=yes,width=320,height=550"),t.testWindowPopup.document.write(this.html),window.addEventListener("unload",function(e){t.testWindowPopup&&t.testWindowPopup.close()}),this},o.prototype.showHtml=function(t,e){return t=t||document.body,e?t.innerHTML+=this.html:t.innerHTML=this.html,this},o.prototype.createSuitePerformance=function(t,e){var n=this,s=n.tests.push({label:t,testCases:[],get faster(){var t=this.testCases.concat().sort(function(t,e){return t.value-e.value});return this.testCases.indexOf(t[0])},get slower(){var t=this.testCases.concat().sort(function(t,e){return e.value-t.value});return this.testCases.indexOf(t[0])},type:"perf"});n.log("[testSuite.js creating performance suite] "+t),e(),n.asyncTests.pendingTests.filter(function(t){return t.suite===n.tests[s-1]}).length?n.log("[testSuite.js performance suite] suite called \n"+t+" \nhave asynchronous test cases"):n.options.onSuiteTerminate(n.tests[s-1])},o.prototype.createPerformanceTestCase=function(n,s,o){var r,i,a=this,l=a.tests[a.tests.length-1],u=function(u){r=t.performanceMeasuring.endPerf(i);var c=l.testCases.push({label:n,value:r}),p=e?"green":"[32m ";l.faster!=c-1&&(p=e?"red":"[31m "),a.log("[testSuite.js testcase performance terminated] "+n+" - test case #"+(c-1)+" = "+r,p),o&&a.asyncTests.remove(s),o&&!a.asyncTests.pendingTests.filter(function(t){return t.suite===l}).length&&a.options.onSuiteTerminate(l),o&&u&&u(r)};if(i=t.performanceMeasuring.startPerf(),!o)return s(),u(),r;a.asyncTests.add(s,l),s(u)},function(t){t.performanceMeasuring={startPerf:function(){return t.performance?t.performance.now():process.hrtime()},endPerf:function(e){if(t.performance)return t.performance.now()-e;var n=process.hrtime(e);return console.log(n),1e3*n[0]+n[1]/1e6}}}("undefined"!=typeof window?window:module.exports),t.testSuite=o}("undefined"!=typeof window?window:module.exports,"undefined"!=typeof window);